<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dodaj Proizvod</title>
</head>
<body>
    <h1>Dodaj Proizvod</h1>
    <form id="product-form">
        <label for="name">Naziv proizvoda:</label>
        <input type="text" id="name" name="name" required><br><br>

        <label for="price">Cijena:</label>
        <input type="number" id="price" name="price" required><br><br>

        <label for="category">Kategorija:</label>
        <select id="category" name="category">
            <option value="voce">Voće</option>
            <option value="meso">Meso</option>
            <option value="voda">Voda</option>
        </select><br><br>

        <button type="submit">Dodaj</button>
    </form>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
    apiKey: "AIzaSyDiKlHEWyv9tm8Y1yD2-zU5rfxSo_eUmvo",
    authDomain: "voda-3e56f.firebaseapp.com",
    projectId: "voda-3e56f",
    storageBucket: "voda-3e56f.appspot.com",
    messagingSenderId: "181585863841",
    appId: "1:181585863841:web:4446f565c29f8b88e2fce0",
    measurementId: "G-GL6E58EYNY"
  };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const form = document.getElementById('product-form');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = form.name.value;
            const price = form.price.value;
            const category = form.category.value;

            try {
                await addDoc(collection(db, 'proizvodi'), {
                    name,
                    price,
                    category
                });
                if (category === 'voda') {
                    window.location.href = 'voda.html';
                } else {
                    alert('Proizvod uspješno dodan!');
                }
            } catch (e) {
                console.error("Error adding document: ", e);
            }
        });
    </script>
</body>
</html>
